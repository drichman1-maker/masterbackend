# 2026-02-13 — Deployment & Architecture Decision

## Decision: Ship As-Is, Then Consolidate

**Context:** 4 aggregator sites with different backend architectures:
- Rumble: FastAPI
- MintCondition: Flask  
- CoinCurator: Node.js + Express
- MacTrackr: FastAPI + Turborepo

**Decision:** Deploy existing backends independently (Option A), then build shared infrastructure in background.

**Rationale:**
- Speed to market > architectural purity
- Get sites live, start earning, then optimize
- Each site can generate revenue while shared backend is built
- Avoid 2-3 week rewrite delay

## Cost Analysis

**Option A: Ship As-Is (Current Architecture)**
- Render Web Services: $7 x 4 = $28/mo
- PostgreSQL: $7 x 3 = $21/mo
- Redis (Upstash Free): $0/mo
- Vercel: $0/mo
- **Total: ~$49-76/mo**

**Option B: Standardize to FastAPI**
- Same infrastructure as A
- Dev time: 2-3 weeks to rewrite CoinCurator (Node→Python)
- **Total: ~$49-76/mo + opportunity cost**

**Option C: Consolidate to 1 Backend**
- One Render service: $7-15/mo
- One PostgreSQL: $7/mo
- One Redis: $0/mo
- Dev time: 3-4 weeks to build unified backend
- **Total: ~$14-35/mo**

**Savings from consolidation:** $35-41/mo (not worth the 3-4 week delay)

## Deployment Order (Today)

1. **Rumble** (FastAPI) — eBay API ready
2. **MintCondition** (Flask) — eBay API ready
3. **CoinCurator** (Node.js) — needs SQLite→PostgreSQL migration
4. **MacTrackr** (FastAPI) — needs Redis + Northflank

## Shared Infrastructure Plan (Background)

**Phase 1:** Get individual backends live and earning
**Phase 2:** Build unified FastAPI backend with:
- Single PostgreSQL database (schema-per-project)
- Single Redis instance for rate limiting
- Modular scrapers (one per data source)
- Unified API with `/projects/{name}/` routes
- Gradual migration of projects one-by-one

**Timeline:** 
- Individual deploys: Today
- Shared backend: Week 2-3 (once revenue validates investment)

## Action Items

### Immediate (Today)
- [ ] Deploy Rumble backend to Render
- [ ] Deploy MintCondition backend to Render
- [ ] Migrate CoinCurator SQLite→PostgreSQL, deploy
- [ ] Deploy MacTrackr backend to Northflank (Redis + PostgreSQL)

### Background (Next 2-3 weeks)
- [ ] Design unified backend architecture
- [ ] Build shared FastAPI core
- [ ] Migrate scrapers to shared system
- [ ] Migrate projects one at a time
- [ ] Decommission individual backends

## Key Metric: Cost-Per-Dollar-Revenue

If sites generate $500/mo combined:
- Option A cost: 15% of revenue
- Option C cost: 7% of revenue
- **But Option A ships 3-4 weeks earlier**

**Decision:** Ship now, optimize later. Architecture can wait; revenue cannot.
